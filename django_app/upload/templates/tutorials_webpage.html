{% load static %}
<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tutorials ‚Äî Nazukware</title>
  <meta name="description" content="Hands‚Äëon tutorials for Python, Django, Docker, SQL, Git/CI, Nginx, and Embedded." />
  <meta property="og:title" content="Tutorials ‚Äî Nazukware" />
  <meta property="og:description" content="Guides with copyable code, ToC, progress tracking and search." />
  <meta property="og:image" content="{% static 'images/og-cover.jpg' %}" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config={theme:{extend:{colors:{brand:{50:'#effdfc',100:'#c6fbf6',200:'#8ff7ee',300:'#5febdf',400:'#2fd1c7',500:'#12b6ad',600:'#0a8f8a',700:'#0a6f6d',800:'#0a5555',900:'#083f40'}}}}};</script>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>body{font-family:'Inter',ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}</style>

  <!-- Prism (syntax) -->
  <link rel="stylesheet" href="https://unpkg.com/prismjs@1.29.0/themes/prism.css"/>
  <script src="https://unpkg.com/prismjs@1.29.0/components/prism-core.min.js"></script>
  <script src="https://unpkg.com/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
  <script>Prism.plugins.autoloader.languages_path='https://unpkg.com/prismjs@1.29.0/components/'</script>

  <!-- Markdown + Search -->
  <script src="https://unpkg.com/marked@12.0.2/marked.min.js"></script>
  <script src="https://unpkg.com/lunr/lunr.js"></script>

  <script>(function(){var s=localStorage.getItem('theme');if(s==='dark'||(!s&&matchMedia('(prefers-color-scheme: dark)').matches)){document.documentElement.classList.add('dark')}})();</script>

  <style>
    @media print { .no-print{display:none!important} body{color:#000} }
    .code-actions{position:absolute;top:.5rem;right:.5rem}
  </style>
</head>
<body class="bg-white text-neutral-800 dark:bg-neutral-950 dark:text-neutral-100">
  <header class="sticky top-0 z-50 backdrop-blur supports-[backdrop-filter]:bg-white/60 dark:supports-[backdrop-filter]:bg-neutral-900/60">
    <nav class="mx-auto max-w-7xl px-4">
      <div class="flex h-16 items-center justify-between">
        <a href="{% url 'homepage_main' %}" class="flex items-center gap-2">
          <img src="{% static 'images/nazukware-logo.svg' %}" class="h-8 w-auto" alt="Nazukware"/>
          <span class="hidden text-xl font-extrabold tracking-tight text-brand-600 dark:text-brand-300">Nazukware</span>
        </a>
        <div class="hidden items-center gap-8 md:flex">
          <a class="text-brand-600 dark:text-brand-300" href="{% url 'tutorials_webpage' %}">Tutorials</a>
          <a class="hover:text-brand-600" href="{% url 'e_commerce' %}">E‚Äëcommerce</a>
          <a href="https://cloud.nazukware.com" target="_blank" rel="noopener noreferrer" class="hover:text-brand-600 dark:hover:text-brand-300">Live Demos</a>
          <a class="hover:text-brand-600" href="{% url 'homepage_main' %}#contact">Contact</a>
        </div>
        <div class="flex items-center gap-2">
          <input id="globalSearch" placeholder="Search tutorials‚Ä¶" class="no-print hidden w-64 rounded-xl border border-neutral-300 bg-white/80 px-3 py-2 text-sm outline-none placeholder:text-neutral-400 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 dark:border-neutral-700 dark:bg-neutral-900/80 md:block"/>
          <button id="themeToggle" class="no-print rounded-full border border-neutral-200 p-2 text-neutral-700 shadow-sm hover:bg-neutral-50 active:scale-95 dark:border-neutral-700 dark:text-neutral-200 dark:hover:bg-neutral-800">üåì</button>
        </div>
      </div>
    </nav>
  </header>

  <main class="mx-auto grid max-w-7xl grid-cols-1 gap-8 px-4 py-8 md:grid-cols-[260px,1fr]">
    <aside class="md:sticky md:top-20 md:self-start">
      <nav class="rounded-2xl border border-neutral-200 bg-white p-4 text-sm shadow-sm dark:border-neutral-800 dark:bg-neutral-900">
        <h2 class="mb-2 text-xs font-semibold uppercase tracking-wide text-neutral-500">Sections</h2>
        <ul id="sections" class="space-y-2"></ul>
      </nav>
      <div class="mt-4 rounded-2xl border border-brand-200 bg-brand-50 p-4 text-sm dark:border-brand-900/40 dark:bg-brand-900/20">
        <div class="font-semibold">Progress</div>
        <div id="progressSummary" class="mt-1 text-neutral-700 dark:text-neutral-300">0% complete</div>
      </div>
    </aside>

    <section>
      <nav id="breadcrumbs" class="no-print mb-4 text-sm text-neutral-500"></nav>
      <header id="articleHeader" class="mb-4 hidden">
        <h1 id="articleTitle" class="text-3xl font-extrabold"></h1>
        <div class="mt-2 flex flex-wrap items-center gap-2 text-sm text-neutral-500">
          <span id="articleBadges" class="flex flex-wrap gap-2"></span>
          <span>‚Ä¢</span>
          <span id="updatedAt"></span>
          <button id="markDone" class="no-print ml-auto rounded-lg border border-neutral-300 px-3 py-1 text-sm hover:bg-neutral-50 dark:border-neutral-700 dark:hover:bg-neutral-800">Mark as done</button>
          <button id="printBtn" class="no-print rounded-lg border border-neutral-300 px-3 py-1 text-sm hover:bg-neutral-50 dark:border-neutral-700 dark:hover:bg-neutral-800">Print / PDF</button>
        </div>
      </header>
      <aside id="toc" class="no-print mb-6 hidden rounded-2xl border border-neutral-200 bg-white p-4 text-sm shadow-sm dark:border-neutral-800 dark:bg-neutral-900"></aside>

      <article id="article" class="prose max-w-none dark:prose-invert">
        <div id="landing">
          <h1 class="text-3xl font-extrabold">Developer Tutorials</h1>
          <p class="mt-2 text-neutral-600 dark:text-neutral-300">Curated guides with copyable code, tabs, ToC, exercises and full‚Äëtext search.</p>
          <ul class="mt-6 grid gap-3 sm:grid-cols-2">
            <li class="rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900"><strong>Tip:</strong> Hit <kbd>/</kbd> to focus search. Use the sidebar to jump by section.</li>
            <li class="rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900"><strong>Progress:</strong> Completed lessons are remembered on this device.</li>
          </ul>
        </div>
        <div id="articleContent" class="hidden"></div>
        <div id="feedback" class="no-print mt-8 hidden rounded-2xl border border-neutral-200 bg-white p-4 text-sm shadow-sm dark:border-neutral-800 dark:bg-neutral-900">
          <div class="mb-2 font-semibold">Was this helpful?</div>
          <div class="flex gap-2">
            <button data-fb="up" class="rounded-lg border border-neutral-300 px-3 py-1 hover:bg-neutral-50 dark:border-neutral-700 dark:hover:bg-neutral-800">üëç Yes</button>
            <button data-fb="down" class="rounded-lg border border-neutral-300 px-3 py-1 hover:bg-neutral-50 dark:border-neutral-700 dark:hover:bg-neutral-800">üëé No</button>
            <a id="openIssue" class="ml-2 inline-flex items-center rounded-lg border border-neutral-300 px-3 py-1 hover:bg-neutral-50 dark:border-neutral-700 dark:hover:bg-neutral-800" target="_blank" rel="noreferrer">Open GitHub issue</a>
          </div>
        </div>
      </article>
    </section>
  </main>

  <footer class="border-t border-neutral-100 py-10 dark:border-neutral-800"><div class="mx-auto max-w-7xl px-4 text-sm text-neutral-500">¬© <span id="year"></span> Nazukware.</div></footer>

  <script>
  // ===== Tutorial data =====
  // Keep ES5-friendly syntax for broad compatibility
  var ARTICLES = [
    // --- PYTHON ---
    { id:'py-venv', section:'Python', slug:'venv-basics', title:'Python Environments (venv)', difficulty:'Beginner', versions:['Python 3.12'], updated:'2025-08-08', est:'10 min', keywords:'venv pip requirements virtualenv', content:
      "\n## What you'll learn\n- Create and activate venv\n- Freeze and install dependencies\n\n## Prerequisites\n- Python 3.10+\n\n## Steps\n<div class=\"tabset\"><button class=\"tab active\" data-for=\"bash1\">Bash</button><button class=\"tab\" data-for=\"ps1\">PowerShell</button><div class=\"panel active\" id=\"bash1\"><pre><code class=\"language-bash\">python3 -m venv .venv\nsource .venv/bin/activate\npip -V</code></pre></div><div class=\"panel\" id=\"ps1\"><pre><code class=\"language-powershell\">py -m venv .venv\n.venv\\Scripts\\Activate.ps1\npip -V</code></pre></div></div>\n\n> try-it\n> Verify your prompt shows `(.venv)` and `which python` points to `.venv`.\n\n## Pitfalls\n- Mixing system packages with venv\n\n## Further reading\n- https://docs.python.org/3/library/venv.html\n" },
    { id:'py-oop', section:'Python', slug:'oop-dataclass', title:'OOP & Dataclasses', difficulty:'Beginner', versions:['Python 3.12'], updated:'2025-08-08', est:'12 min', keywords:'class dataclass eq order slots', content:
      "\n## What you'll learn\n- Classes vs `@dataclass`\n- `__repr__`, `eq`, ordering, `slots`\n\n## Steps\n<pre><code class=\"language-python\">from dataclasses import dataclass\n\n@dataclass(eq=True, order=True, slots=True)\nclass Point:\n    x: int\n    y: int\n\np1 = Point(1,2)\np2 = Point(1,2)\nassert p1 == p2\nprint(sorted([Point(2,1), Point(1,5)]))</code></pre>\n\n## Pitfalls\n- Mutability: prefer `frozen=True` for value objects\n" },
    { id:'py-async', section:'Python', slug:'asyncio-threads-procs', title:'Concurrency: asyncio vs Threads vs Procs', difficulty:'Intermediate', versions:['Python 3.12'], updated:'2025-08-08', est:'15 min', keywords:'asyncio threading multiprocessing GIL', content:
      "\n## What you'll learn\n- Pick the right model per workload\n\n## Steps\n<pre><code class=\"language-python\"># I/O bound: asyncio\nimport asyncio, httpx\nasync def main():\n    async with httpx.AsyncClient() as c:\n        r = await c.get('https://example.com')\n    print(r.status_code)\nasyncio.run(main())</code></pre>\n<pre><code class=\"language-python\"># CPU bound: multiprocessing\nfrom multiprocessing import Pool\nprint(Pool().map(lambda x:x*x, range(5)))</code></pre>\n\n## Pitfalls\n- Threads limited by GIL for CPU work\n- Use `asyncio.to_thread` to call blocking I/O\n" },

    // --- DJANGO ---
    { id:'dj-structure', section:'Django', slug:'project-structure', title:'Project Structure & Settings Split', difficulty:'Beginner', versions:['Django 5'], updated:'2025-08-08', est:'12 min', keywords:'settings base dev prod env', content:
      "\n## What you'll learn\n- Split settings: base/dev/prod\n\n## Steps\n<pre><code class=\"language-python\"># settings/__init__.py\nfrom .base import *\n</code></pre>\n<pre><code class=\"language-python\"># manage.py\nos.environ.setdefault('DJANGO_SETTINGS_MODULE','project.settings.dev')</code></pre>\n\n## Pitfalls\n- Never commit secrets; use env vars\n" },
    { id:'dj-orm', section:'Django', slug:'queryset-essentials', title:'ORM: QuerySet Essentials', difficulty:'Intermediate', versions:['Django 5','PostgreSQL'], updated:'2025-08-08', est:'15 min', keywords:'select_related prefetch_related annotate', content:
      "\n## Steps\n<pre><code class=\"language-python\">Order.objects.select_related('customer').prefetch_related('lines')</code></pre>\n<pre><code class=\"language-python\">from django.db.models import Count\nCustomer.objects.annotate(orders=Count('order')).order_by('-orders')</code></pre>\n\n## Pitfalls\n- N+1 queries; confirm with Debug Toolbar\n" },
    { id:'dj-drf-auth', section:'Django', slug:'drf-auth-jwt', title:'DRF Auth with JWT', difficulty:'Intermediate', versions:['DRF','Django 5'], updated:'2025-08-08', est:'14 min', keywords:'drf jwt simplejwt permissions throttling', content:
      "\n## Steps\n<pre><code class=\"language-bash\">pip install djangorestframework djangorestframework-simplejwt</code></pre>\n<pre><code class=\"language-python\">REST_FRAMEWORK = {\n  'DEFAULT_AUTHENTICATION_CLASSES': ('rest_framework_simplejwt.authentication.JWTAuthentication',),\n}</code></pre>\n<pre><code class=\"language-bash\">python manage.py migrate\npython manage.py runserver</code></pre>\n" },
    { id:'dj-cache', section:'Django', slug:'caching-redis', title:'Caching with Redis', difficulty:'Intermediate', versions:['Django 5','Redis'], updated:'2025-08-08', est:'12 min', keywords:'cache redis per-view low-level', content:
      "\n## Steps\n<pre><code class=\"language-python\">CACHES={'default':{'BACKEND':'django.core.cache.backends.redis.RedisCache','LOCATION':'redis://redis:6379/1'}}</code></pre>\n<pre><code class=\"language-python\">from django.views.decorators.cache import cache_page\n@cache_page(60*5)\ndef home(request): ...</code></pre>\n" },

    // --- DOCKER ---
    { id:'dk-multistage', section:'Docker', slug:'multi-stage', title:'Multi‚Äëstage Builds', difficulty:'Intermediate', versions:['Docker 24+','linux/arm64'], updated:'2025-08-08', est:'12 min', keywords:'dockerfile multistage layers size', content:
      "\n## Dockerfile\n<pre><code class=\"language-docker\">FROM python:3.12-slim AS base\nWORKDIR /app\nCOPY requirements.txt .\nRUN pip install -r requirements.txt\nCOPY . .\nFROM base AS tests\nRUN pytest -q\nFROM python:3.12-slim AS run\nWORKDIR /app\nCOPY --from=base /app /app\nCMD ['python','app.py']</code></pre>\n" },
    { id:'dk-compose', section:'Docker', slug:'compose-django-postgres-redis', title:'Compose: Django + Postgres + Redis', difficulty:'Intermediate', versions:['Compose v2'], updated:'2025-08-08', est:'18 min', keywords:'compose healthcheck volumes env', content:
      "\n## compose.yml\n<pre><code class=\"language-yaml\">services:\n  web:\n    build: .\n    command: gunicorn app.wsgi:application -b 0.0.0.0:8000\n    depends_on: [db, redis]\n    environment: [DATABASE_URL=postgres://postgres:postgres@db:5432/app]\n    ports: ['8000:8000']\n  db:\n    image: postgres:16\n    environment: [POSTGRES_PASSWORD=postgres]\n    volumes: ['pg:/var/lib/postgresql/data']\n  redis:\n    image: redis:7\nvolumes: { pg: {} }</code></pre>\n" },
    { id:'dk-health', section:'Docker', slug:'healthchecks', title:'Healthchecks & Graceful Shutdown', difficulty:'Intermediate', versions:['Docker 24'], updated:'2025-08-08', est:'10 min', keywords:'HEALTHCHECK stop-signal', content:
      "\n## Dockerfile\n<pre><code class=\"language-docker\">HEALTHCHECK --interval=30s --timeout=5s CMD curl -f http://localhost:8000/health || exit 1\nSTOPSIGNAL SIGTERM</code></pre>\n" },

    // --- SQL / POSTGRES ---
    { id:'sql-index', section:'SQL / Postgres', slug:'index-explain', title:'Indexes & EXPLAIN', difficulty:'Intermediate', versions:['PostgreSQL 16'], updated:'2025-08-08', est:'12 min', keywords:'index btree gin explain analyze', content:
      "\n## Steps\n<pre><code class=\"language-sql\">CREATE INDEX CONCURRENTLY idx_user_email ON users (email);\nEXPLAIN ANALYZE SELECT * FROM users WHERE email='a@b.com';</code></pre>\n\n## Pitfalls\n- Don't over-index writes; watch bloat\n" },
    { id:'sql-tx', section:'SQL / Postgres', slug:'transactions-isolation', title:'Transactions & Isolation', difficulty:'Intermediate', versions:['PostgreSQL 16'], updated:'2025-08-08', est:'10 min', keywords:'read committed repeatable serializable', content:
      "\n## Notes\n- Defaults to READ COMMITTED\n- Use SERIALIZABLE for correctness-critical flows\n" },

    // --- GIT / CI ---
    { id:'ci-actions', section:'Git / CI', slug:'github-actions-django', title:'GitHub Actions: Test Django', difficulty:'Beginner', versions:['Ubuntu','Python 3.12'], updated:'2025-08-08', est:'10 min', keywords:'ci pytest matrix cache', content:
      "\n## .github/workflows/ci.yml\n<pre><code class=\"language-yaml\">name: CI\non: [push, pull_request]\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-python@v5\n        with: {python-version: '3.12'}\n      - run: pip install -r requirements.txt\n      - run: pytest -q</code></pre>\n" },
    { id:'git-cc', section:'Git / CI', slug:'conventional-commits', title:'Conventional Commits & Versioning', difficulty:'Beginner', versions:['Any'], updated:'2025-08-08', est:'8 min', keywords:'semver changelog', content:
      "\n## Examples\n- feat(auth): add JWT refresh\n- fix(api): handle empty payload\n" },

    // --- NGINX ---
    { id:'nx-proxy', section:'Nginx', slug:'reverse-proxy-gunicorn', title:'Reverse Proxy ‚Üí Django/Gunicorn', difficulty:'Intermediate', versions:['Nginx 1.24'], updated:'2025-08-08', est:'12 min', keywords:'proxy buffers timeouts headers', content:
      "\n## nginx.conf (snippet)\n<pre><code class=\"language-nginx\">location /static/ { alias /home/app/web/staticfiles/; }\nlocation /media/  { alias /home/app/web/media/; }\nlocation / {\n  proxy_pass http://web:8000;\n  proxy_set_header Host $host;\n  proxy_read_timeout 60s;\n}</code></pre>\n" },
    { id:'nx-security', section:'Nginx', slug:'security-headers', title:'Security Headers (CSP/HSTS)', difficulty:'Intermediate', versions:['Nginx 1.24'], updated:'2025-08-08', est:'10 min', keywords:'csp hsts referrer', content:
      "\n## Add headers\n<pre><code class=\"language-nginx\">add_header X-Frame-Options SAMEORIGIN always;\nadd_header X-Content-Type-Options nosniff always;\nadd_header Referrer-Policy strict-origin-when-cross-origin always;\nadd_header Strict-Transport-Security \"max-age=31536000; includeSubDomains\" always;</code></pre>\n" },

    // --- EMBEDDED ---
    { id:'em-startup', section:'Embedded', slug:'startup-linker', title:'Startup & Linker (STM32)', difficulty:'Intermediate', versions:['ARM Cortex-M'], updated:'2025-08-08', est:'15 min', keywords:'isr_vector reset handler sections', content:
      "\n## Steps\n- Vector table at 0x08000000\n- Reset handler ‚Üí init data/bss ‚Üí main\n<pre><code class=\"language-asm\">.section .isr_vector\n.word _estack\n.word Reset_Handler</code></pre>\n" },
    { id:'em-freertos', section:'Embedded', slug:'freertos-tasks', title:'FreeRTOS Tasks Basics', difficulty:'Intermediate', versions:['STM32','ESP32'], updated:'2025-08-08', est:'12 min', keywords:'tasks stack tick priority', content:
      "\n## Steps\n<pre><code class=\"language-c\">xTaskCreate(BlinkTask, \"blink\", 256, NULL, 1, NULL);\nvTaskStartScheduler();</code></pre>\n" }
  ];

  // ===== Utilities (ES5) =====
  var $ = function(sel, root){ return (root||document).querySelector(sel); };
  var $$ = function(sel, root){ return Array.prototype.slice.call((root||document).querySelectorAll(sel)); };
  var slugify = function(s){ return (s||'').toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,''); };

  // Progress (no Object.values)
  var PKEY = 'tutorials.progress.v1';
  var progress = JSON.parse(localStorage.getItem(PKEY) || '{}');
  var setDone = function(id, v){ progress[id] = !!v; localStorage.setItem(PKEY, JSON.stringify(progress)); renderProgress(); };
  var isDone = function(id){ return !!progress[id]; };
  var renderProgress = function(){
    var total = ARTICLES.length, done = 0, k;
    for(k in progress){ if(progress.hasOwnProperty(k) && progress[k]) done++; }
    var pct = total? Math.round(done*100/total) : 0;
    $('#progressSummary').textContent = done+"/"+total+" ("+pct+"%) complete";
  };

  // Sidebar (no Set / Array.from)
  var sectionsEl = $('#sections');
  var seen = {}; var sections = []; var i;
  for(i=0;i<ARTICLES.length;i++){ var sec=ARTICLES[i].section; if(!seen[sec]){ seen[sec]=true; sections.push(sec); } }
  sections.forEach(function(sec){
    var items = ARTICLES.filter(function(a){ return a.section===sec; });
    var li = document.createElement('li');
    li.innerHTML = '<details '+(items.length<6?'open':'')+' class="rounded-lg border border-neutral-200 dark:border-neutral-800">\
        <summary class="cursor-pointer select-none px-3 py-2 font-semibold">'+sec+'</summary>\
        <ul class="p-2 space-y-1 text-sm"></ul>\
      </details>';
    var ul = $('ul', li);
    items.forEach(function(a){
      var link = document.createElement('a');
      link.className = 'flex items-center justify-between rounded-md px-2 py-1 hover:bg-neutral-50 dark:hover:bg-neutral-800';
      link.href = '#/tutorials/'+slugify(a.section)+'/'+a.slug;
      link.innerHTML = '<span>'+a.title+'</span><span class="text-xs '+(isDone(a.id)?'text-brand-600':'text-neutral-400')+'">'+(isDone(a.id)?'‚úì':'')+'</span>';
      var lii = document.createElement('li'); lii.appendChild(link); ul.appendChild(lii);
    });
    sectionsEl.appendChild(li);
  });

  // Search (Lunr)
  var idx = lunr(function(){ this.ref('id'); this.field('title'); this.field('section'); this.field('keywords'); ARTICLES.forEach(function(a){ this.add(a); }, this); });
  var gs = $('#globalSearch');
  if(gs){
    window.addEventListener('keydown', function(e){ if(e.key==='/' && document.activeElement!==gs){ e.preventDefault(); gs.focus(); }});
    gs.addEventListener('keydown', function(e){ if(e.key==='Escape'){ var sr=$('#searchResults'); if(sr){ sr.parentNode.removeChild(sr); } gs.blur(); }});
    gs.addEventListener('input', function(e){
      var q = e.target.value.trim();
      var old = $('#searchResults'); if(old){ old.parentNode.removeChild(old); }
      if(!q){ return; }
      var res = idx.search(q).slice(0,8).map(function(r){ var j, a=null; for(j=0;j<ARTICLES.length;j++){ if(ARTICLES[j].id===r.ref){ a=ARTICLES[j]; break; } } return a; }).filter(Boolean);
      var box = document.createElement('div'); box.id='searchResults'; box.className='absolute right-4 z-[60] mt-2 w-[32rem] rounded-xl border border-neutral-200 bg-white p-2 shadow-lg dark:border-neutral-800 dark:bg-neutral-900';
      box.innerHTML = (res.map(function(a){ return "<a class='block rounded-lg px-3 py-2 hover:bg-neutral-50 dark:hover:bg-neutral-800' href='#/tutorials/"+slugify(a.section)+"/"+a.slug+"'><div class='font-semibold'>"+a.title+"</div><div class='text-xs text-neutral-500'>"+a.section+" ‚Ä¢ "+(a.keywords||'')+"</div></a>"; }).join('')) || "<div class='px-3 py-2 text-sm text-neutral-500'>No results</div>";
      gs.parentElement.appendChild(box);
    });
    document.addEventListener('click', function(e){ if(!e.target.closest || (!e.target.closest('#searchResults') && e.target!==gs)){ var sr=$('#searchResults'); if(sr){ sr.parentNode.removeChild(sr); } } });
  }

  // Router
  function parseHash(){ var m = location.hash.match(/^#\/tutorials\/([^/]+)\/([^/]+)$/); if(!m) return null; return { section:m[1], slug:m[2] }; }

  function renderArticle(article){
    $('#landing').classList.add('hidden');
    $('#articleHeader').classList.remove('hidden');
    $('#articleContent').classList.remove('hidden');
    $('#feedback').classList.remove('hidden');
    $('#articleTitle').textContent = article.title;
    $('#updatedAt').textContent = 'Updated '+article.updated+' ‚Ä¢ ~'+article.est;
    var badges = [];
    if(article.difficulty) badges.push("<span class='rounded-md bg-brand-50 px-2 py-0.5 text-brand-700 dark:bg-brand-900/30 dark:text-brand-300'>"+article.difficulty+"</span>");
    (article.versions||[]).forEach(function(v){ badges.push("<span class='rounded-md bg-neutral-100 px-2 py-0.5 text-neutral-700 dark:bg-neutral-800 dark:text-neutral-200'>"+v+"</span>"); });
    $('#articleBadges').innerHTML = badges.join('');
    $('#breadcrumbs').innerHTML = "<a class='hover:underline' href='{% url 'tutorials_webpage' %}'>Tutorials</a> ‚Ä∫ <span class='capitalize'>"+article.section+"</span> ‚Ä∫ <span class='text-neutral-700 dark:text-neutral-200'>"+article.title+"</span>";
    var doneBtn = $('#markDone');
    doneBtn.textContent = isDone(article.id)?'‚úì Done':'Mark as done';
    doneBtn.onclick = function(){ setDone(article.id, !isDone(article.id)); doneBtn.textContent = isDone(article.id)?'‚úì Done':'Mark as done'; };
    $('#printBtn').onclick = function(){ window.print(); };
    var issue = "https://github.com/shriyashdixit/new_server/issues/new?title="+encodeURIComponent('Tutorial feedback: '+article.title)+"&labels=tutorial&body="+encodeURIComponent('URL: '+location.href+'\n\nFeedback: ');
    $('#openIssue').href = issue;
    $('#feedback [data-fb="up"]').onclick = function(){ alert('Thanks for the feedback!'); };
    $('#feedback [data-fb="down"]').onclick = function(){ location.href = issue; };

    var html = marked.parse(article.content);
    var container = $('#articleContent'); container.innerHTML = html;

    $$('#articleContent blockquote').forEach(function(b){ var txt=(b.textContent||'').trim(); if(/^try-it/i.test(txt)){ b.className='border-l-4 border-brand-400 bg-brand-50/50 p-4 rounded-lg dark:border-brand-800 dark:bg-brand-900/20'; b.innerHTML = "<div class='font-semibold mb-1'>Try it</div><div>"+txt.replace(/^try-it/i,'').trim()+"</div>"; }});

    $$('#articleContent .tabset').forEach(function(ts){ var tabs=$$('.tab', ts), panels=$$('.panel', ts); tabs.forEach(function(t){ t.addEventListener('click', function(){ tabs.forEach(function(x){ x.classList.remove('active'); }); panels.forEach(function(x){ x.classList.remove('active'); }); t.classList.add('active'); var target='#'+t.getAttribute('data-for'); $(target, ts).classList.add('active'); }); }); ts.classList.add('rounded-xl','border','border-neutral-200','p-3','dark:border-neutral-800','bg-white','dark:bg-neutral-900'); tabs.forEach(function(t){ t.classList.add('mr-2','rounded-lg','border','border-neutral-300','px-3','py-1','text-sm','dark:border-neutral-700'); }); $$('.panel', ts).forEach(function(p){ p.classList.add('mt-3'); }); });

    $$('#articleContent pre').forEach(function(pre){ pre.classList.add('relative','rounded-xl','border','border-neutral-200','bg-neutral-50','dark:border-neutral-800','dark:bg-neutral-900'); var btn=document.createElement('button'); btn.textContent='Copy'; btn.className='code-actions rounded-md border border-neutral-300 bg-white/80 px-2 py-0.5 text-xs hover:bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-800'; btn.onclick=function(){ navigator.clipboard.writeText(pre.innerText); btn.textContent='Copied!'; setTimeout(function(){ btn.textContent='Copy'; },1200); }; pre.appendChild(btn); });
    Prism.highlightAllUnder(container);

    var heads = $$('#articleContent h2, #articleContent h3'); heads.forEach(function(h){ var id=slugify(h.textContent); h.id=id; }); var toc = heads.map(function(h){ return "<a class='block truncate "+(h.tagName==='H2'?'font-semibold':'pl-4 text-neutral-500')+" hover:text-brand-600' href='#"+h.id+"'>"+h.textContent+"</a>"; }).join(''); var tocBox=$('#toc'); tocBox.innerHTML=toc; tocBox.classList.remove('hidden');

    var h2s = $$('#articleContent h2'); var steps=[]; h2s.forEach(function(h, i){ steps.push({ '@type':'HowToStep', position:i+1, name:h.textContent }); }); var ld={ '@context':'https://schema.org', '@type':'HowTo', name:article.title, description:document.querySelector('meta[name="description"]').content, step:steps }; var old=$('#ldjson'); if(old){ old.parentNode.removeChild(old); } var s=document.createElement('script'); s.id='ldjson'; s.type='application/ld+json'; s.textContent=JSON.stringify(ld); document.head.appendChild(s);

    document.title = article.title+' ‚Äî Tutorials ‚Äî Nazukware';
  }

  function route(){ var r=parseHash(); if(!r){ $('#articleHeader').classList.add('hidden'); $('#toc').classList.add('hidden'); $('#articleContent').classList.add('hidden'); $('#feedback').classList.add('hidden'); $('#landing').classList.remove('hidden'); document.title='Tutorials ‚Äî Nazukware'; return; } var section=decodeURIComponent(r.section); var j,a=null; for(j=0;j<ARTICLES.length;j++){ if(slugify(ARTICLES[j].section)===section && ARTICLES[j].slug===r.slug){ a=ARTICLES[j]; break; } } if(a){ renderArticle(a); } else { location.hash=''; } }

  document.getElementById('year').textContent = new Date().getFullYear();
  document.getElementById('themeToggle').addEventListener('click', function(){ var d=document.documentElement.classList.toggle('dark'); localStorage.setItem('theme', d?'dark':'light'); });
  renderProgress();
  window.addEventListener('hashchange', route); route();

  // Self-tests
  (function(){ try{ console.groupCollapsed('Tutorials self-tests'); console.assert(slugify('Hello World!')==='hello-world','slugify'); console.assert(/^#\/tutorials\/([^/]+)\/([^/]+)$/.test('#/tutorials/python/venv-basics'),'route regex'); console.groupEnd(); }catch(e){ console.warn('Self-tests failed',e);} })();
  </script>
</body>
</html>
